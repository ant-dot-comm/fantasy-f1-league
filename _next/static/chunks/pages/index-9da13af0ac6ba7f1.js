(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{784:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>y});var l=t(7876),n=t(4232),a=t(9454),r=t(6984),i=t(8230),c=t(9099),o=t(8447),d=t(672),x=t(7212),m=t(4522);function u(e){let{isOpen:s,onClose:t,user:n,children:a,title:r}=e;return s?(0,l.jsx)(x.N,{children:(0,l.jsx)(m.P.div,{className:"fixed inset-0 flex items-end sm:items-center justify-end sm:justify-center bg-neutral-200/50 backdrop-blur-xl z-[500] text-neutral-200",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,l.jsxs)(m.P.div,{className:"w-[95%] max-w-md overflow-hidden flex flex-col relative",initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:120,damping:15},children:[(0,l.jsxs)("div",{className:"flex justify-between items-center px-6",children:[(0,l.jsx)("div",{children:(0,l.jsx)("p",{className:"font-display text-2xl text-neutral-700 leading-none -mb-1.5",children:r})}),(0,l.jsx)("button",{onClick:t,className:"pl-4 text-neutral-700 font-bold",children:(0,l.jsx)(d.A,{size:32,strokeWidth:3})})]}),(0,l.jsxs)("div",{className:"bg-neutral-700 p-6 pb-20 sm:rounded-2xl overflow-y-auto h-[90vh] max-sm:rounded-tl-2xl",children:[a,(0,l.jsx)("div",{className:"content-fade w-full h-1/5 absolute left-0 sm:rounded-b-2xl bottom-0 bg-gradient-to-b transparent to-80% to-neutral-700 z-[2]"})]})]})})}):null}var p=t(1040);function h(e){let{onClose:s}=e,[t,r]=(0,n.useState)(""),[i,o]=(0,n.useState)(""),[d,x]=(0,n.useState)(""),m=(0,c.useRouter)(),u=async e=>{e.preventDefault(),x("");try{let e=await p.A.post("/api/auth/login",{username:t,password:i});a.A.set("token",e.data.token,{expires:7}),sessionStorage.setItem("username",t),s(),m.reload()}catch(e){var l,n;x((null===(n=e.response)||void 0===n?void 0:null===(l=n.data)||void 0===l?void 0:l.message)||"Invalid credentials")}};return(0,l.jsxs)("form",{onSubmit:u,className:"p-6 rounded-lg flex flex-col gap-2",children:[d&&(0,l.jsx)("p",{className:"text-red-500",children:d}),(0,l.jsx)("input",{type:"text",placeholder:"Username",value:t,onChange:e=>r(e.target.value),className:"text-input",required:!0}),(0,l.jsx)("input",{type:"password",placeholder:"Password",value:i,onChange:e=>o(e.target.value),className:"text-input",required:!0}),(0,l.jsx)("button",{type:"submit",className:"w-full bg-cyan-800 text-white p-2 rounded-lg",children:"Login"})]})}function g(e){let{onClose:s}=e,[t,r]=(0,n.useState)(""),[i,o]=(0,n.useState)(""),[d,x]=(0,n.useState)(""),[m,u]=(0,n.useState)(""),h=(0,c.useRouter)(),g=async e=>{if(e.preventDefault(),u(""),i!==d){u("Passwords do not match");return}try{let e=await p.A.post("/api/auth/signup",{username:t,password:i});a.A.set("token",e.data.token,{expires:7}),sessionStorage.setItem("username",t),s(),h.reload()}catch(e){var l,n;u((null===(n=e.response)||void 0===n?void 0:null===(l=n.data)||void 0===l?void 0:l.message)||"Something went wrong")}};return(0,l.jsxs)("form",{onSubmit:g,className:"p-6 rounded-lg flex flex-col gap-2",children:[m&&(0,l.jsx)("p",{className:"text-red-500",children:m}),(0,l.jsx)("input",{type:"text",placeholder:"Username",value:t,onChange:e=>r(e.target.value),className:"text-input",required:!0}),(0,l.jsx)("input",{type:"password",placeholder:"Password",value:i,onChange:e=>o(e.target.value),className:"text-input",required:!0}),(0,l.jsx)("input",{type:"password",placeholder:"Confirm Password",value:d,onChange:e=>x(e.target.value),className:"text-input",required:!0}),(0,l.jsx)("button",{type:"submit",className:"w-full bg-cyan-800 text-white p-2 rounded-lg",children:"Sign Up"})]})}var f=t(5039);function j(){let e=(0,c.useRouter)(),[s,t]=(0,n.useState)(""),[d,x]=(0,n.useState)(!1),[m,p]=(0,n.useState)(!1),[j,N]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=a.A.get("token");if(e)try{let s=(0,r.s)(e);t(s.username)}catch(e){console.error("Error decoding token:",e),t(null)}else t(null)},[a.A.get("token")]);let b=()=>{a.A.remove("token"),sessionStorage.clear(),t(null),x(!1),e.push("/")};return(0,l.jsxs)("header",{className:"border-b-8 border-neutral-700",children:[(0,l.jsxs)("div",{className:"sm:mt-2 flex justify-between items-end sm:px-3",children:[(0,l.jsx)("h1",{className:"font-display -mb-1.5 sm:-mb-2 text-2xl sm:text-3xl leading-none max-sm:ml-3",children:(0,l.jsx)(i,{href:"/",children:"Fantasy F1 League"})}),(0,l.jsx)("nav",{className:f("hidden sm:flex space-x-6 items-end",s?"-mb-2":"-mb-2.5"),children:s?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("span",{className:"flex flex-col items-end",children:[(0,l.jsx)("p",{className:"text-xs text-neutral-500 font-bold leading-none mb-[-4px]",children:"Welcome"}),(0,l.jsx)("p",{className:"font-display text-lg mb-[-2px]",children:s})]}),(0,l.jsx)("button",{onClick:b,className:"font-display",children:"Logout"})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{onClick:()=>N(!0),className:"font-display text-lg",children:"Sign Up"}),(0,l.jsx)("button",{onClick:()=>p(!0),className:"font-display text-lg",children:"Login"})]})}),(0,l.jsx)("button",{onClick:()=>x(!0),className:"py-2 px-4 bg-neutral-700 text-neutral-300 sm:hidden",children:(0,l.jsx)(o.A,{size:32,strokeWidth:2.5})})]}),(0,l.jsx)(u,{isOpen:d,onClose:()=>x(!1),title:"Menu",children:(0,l.jsx)("nav",{className:"flex flex-col",children:s?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{className:"text-sm text-neutral-400 leading-none",children:"Welcome"}),(0,l.jsx)("p",{className:"text-lg font-display text-white leading-none",children:s}),(0,l.jsx)("button",{onClick:b,className:"mt-4 w-full bg-red-500 text-white px-4 py-2 rounded-md",children:"Logout"})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{onClick:()=>{N(!0),x(!1)},className:"block text-lg font-display text-white hover:text-gray-400",children:"Sign Up"}),(0,l.jsx)("button",{onClick:()=>{p(!0),x(!1)},className:"block text-lg font-display text-white hover:text-gray-400",children:"Login"})]})})}),(0,l.jsx)(u,{isOpen:m,onClose:()=>p(!1),title:"Login",children:(0,l.jsx)(h,{onClose:()=>p(!1)})}),(0,l.jsx)(u,{isOpen:j,onClose:()=>N(!1),title:"Sign Up",children:(0,l.jsx)(g,{onClose:()=>N(!1)})})]})}function N(e){let{season:s,loggedInUser:t,className:a}=e,[r,i]=(0,n.useState)([]),[c,o]=(0,n.useState)(!0),[d,x]=(0,n.useState)(null),[m,h]=(0,n.useState)({});async function g(e){if(!m[e])try{let t=await p.A.get("/api/player-race-scores?username=".concat(e,"&season=").concat(s));h(s=>({...s,[e]:t.data.raceBreakdown}))}catch(e){console.error("❌ Error fetching player race data:",e)}}return(0,n.useEffect)(()=>{(async function(){o(!0),x(null),h({});let e=sessionStorage.getItem("leaderboard-".concat(s));if(e){i(JSON.parse(e)),o(!1);return}try{let e=await p.A.get("/api/leaderboard?season=".concat(s));i(e.data.leaderboard),sessionStorage.setItem("leaderboard-".concat(s),JSON.stringify(e.data.leaderboard))}catch(e){console.error("❌ Error fetching leaderboard:",e)}finally{o(!1)}})()},[s]),(0,l.jsxs)("div",{className:f(a,"p-6 bg-neutral-700 rounded-2xl text-neutral-200 sm:min-h-[30rem]"),children:[(0,l.jsx)("ul",{className:"flex gap-2 flex-col",children:r.length>0?r.sort((e,s)=>s.points-e.points).map((e,s)=>(0,l.jsx)("li",{children:(0,l.jsxs)("button",{onClick:()=>{x(e.username),g(e.username)},className:f("w-full text-left font-bold bg-neutral-200 px-2 rounded-lg flex items-center justify-between gap-4 border-b-8",e.username===t?"border-cyan-800 text-cyan-800 shadow-lg":"border-neutral-500 text-neutral-500"),children:[(0,l.jsxs)("p",{className:f("font-display text-4xl -mb-2 -mt-1 leading-none shrink-0",e.username===t?" text-cyan-800":"text-neutral-500"),children:["P",s+1]}),(0,l.jsx)("p",{className:"grow leading-none",children:e.username}),(0,l.jsx)("p",{className:"shrink-0 text-neutral-700 ",children:e.points})]})},e.username)):c?(0,l.jsx)("li",{children:"Loading player scores..."}):(0,l.jsx)("li",{children:"No scores available"})}),(0,l.jsx)(u,{isOpen:!!d,onClose:()=>x(null),user:d,title:"Season Picks",children:m[d]?m[d].map((e,s)=>(0,l.jsxs)("div",{className:"mt-6 mb-10 relative",children:[(0,l.jsxs)("ul",{className:"text-sm bg-neutral-300 rounded-lg flex items-end justify-between relative",children:[e.results.length>=2&&(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-2 absolute top-[-1.5rem] left-1/2 -translate-x-1/2 items-center ",children:[(0,l.jsx)("p",{className:"text-lg font-display text-right",children:e.results[0].points}),(0,l.jsx)("div",{className:"text-center font-display text-2xl bg-cyan-800 rounded w-10",children:e.results.reduce((e,s)=>e+s.points,0)}),(0,l.jsx)("p",{className:"text-lg font-display text-left",children:e.results[1].points})]}),e.results.map((e,s)=>(0,l.jsxs)("li",{className:f("flex flex-col relative -mt-4 rounded-lg",1===s?"items-end -mr-2":"items-start -ml-2"),children:[(0,l.jsx)("img",{src:e.headshot_url,alt:e.driver_name,className:"h-14 mr-2 shrink-0"}),(0,l.jsxs)("div",{className:f("absolute top-0 flex flex-col w-max",1===s?"right-12 text-right":"left-10 text-left"),children:[(0,l.jsx)("p",{className:"font-display text-lg leading-none",children:e.name_acronym}),(0,l.jsxs)("p",{className:"text-xs font-bold leading-none text-neutral-700",children:["P",e.qualifying_position," - P",e.race_position]})]})]},e.driver_number))]}),(0,l.jsxs)("h4",{className:"text-center absolute bottom-1 left-1/2 -translate-x-1/2 w-[75%]",children:[(0,l.jsxs)("p",{className:"leading-none text-[10px] font-bold text-neutral-500 uppercase",children:["Round ",s+1]}),(0,l.jsx)("p",{className:"font-bold text-center text-sm text-neutral-800 leading-none",children:e.race})]})]},e.meeting_key)):(0,l.jsx)("p",{children:"Loading race results..."})})]})}let b={1254:{picks_open:new Date("2024-03-14T23:00:00Z"),picks_close:new Date("2024-03-15T21:00:00Z")},1255:{picks_open:new Date("2024-03-22T01:00:00Z"),picks_close:new Date("2024-03-23T00:00:00Z")},1256:{picks_open:new Date("2024-04-04T00:00:00Z"),picks_close:new Date("2024-03-05T22:00:00Z")},1257:{picks_open:new Date("2024-04-12T10:00:00Z"),picks_close:new Date("2024-04-13T08:00:00Z")},1258:{picks_open:new Date("2024-04-19T11:00:00Z"),picks_close:new Date("2024-04-20T10:00:00Z")},1259:{picks_open:new Date("2024-05-03T14:00:00Z"),picks_close:new Date("2024-05-04T13:00:00Z")},1260:{picks_open:new Date("2024-05-17T08:00:00Z"),picks_close:new Date("2024-05-18T06:00:00Z")},1261:{picks_open:new Date("2024-05-24T08:00:00Z"),picks_close:new Date("2024-05-25T06:00:00Z")},1262:{picks_open:new Date("2024-05-31T08:00:00Z"),picks_close:new Date("2024-06-01T06:00:00Z")},1263:{picks_open:new Date("2024-06-14T14:00:00Z"),picks_close:new Date("2024-06-15T11:00:00Z")},1264:{picks_open:new Date("2024-06-28T08:00:00Z"),picks_close:new Date("2024-06-29T06:00:00Z")},1265:{picks_open:new Date("2024-07-05T08:00:00Z"),picks_close:new Date("2024-07-06T07:00:00Z")},1266:{picks_open:new Date("2024-07-26T08:00:00Z"),picks_close:new Date("2024-07-27T06:00:00Z")},1267:{picks_open:new Date("2024-08-02T08:00:00Z"),picks_close:new Date("2024-08-03T06:00:00Z")},1268:{picks_open:new Date("2024-08-31T07:00:00Z"),picks_close:new Date("2024-08-30T06:00:00Z")},1269:{picks_open:new Date("2024-09-06T08:00:00Z"),picks_close:new Date("2024-09-07T06:00:00Z")},1270:{picks_open:new Date("2024-09-20T06:00:00Z"),picks_close:new Date("2024-09-21T04:00:00Z")},1271:{picks_open:new Date("2024-10-04T07:00:00Z"),picks_close:new Date("2024-10-05T05:00:00Z")},1272:{picks_open:new Date("2024-10-18T15:00:00Z"),picks_close:new Date("2024-10-19T12:00:00Z")},1273:{picks_open:new Date("2024-10-25T15:00:00Z"),picks_close:new Date("2024-10-26T13:00:00Z")},1274:{picks_open:new Date("2024-11-08T11:00:00Z"),picks_close:new Date("2024-11-09T09:00:00Z")},1275:{picks_open:new Date("2024-11-21T21:00:00Z"),picks_close:new Date("2024-11-22T20:00:00Z")},1276:{picks_open:new Date("2024-11-29T11:00:00Z"),picks_close:new Date("2024-11-30T08:00:00Z")},1277:{picks_open:new Date("2024-12-06T07:00:00Z"),picks_close:new Date("2024-12-07T05:00:00Z")}};function v(e){let{season:s,username:t}=e,[a,r]=(0,n.useState)(null),[i,o]=(0,n.useState)([]),[d,x]=(0,n.useState)([]),[m,h]=(0,n.useState)([]),[g,j]=(0,n.useState)(!1),[N,v]=(0,n.useState)(!1),[w,k]=(0,n.useState)(""),y=(0,c.useRouter)();async function _(){try{await p.A.post("/api/submitPicks",{username:t,season:s,meeting_key:a.meeting_key,driverNumbers:m}),o(m),j(!1),y.reload()}catch(e){console.error("❌ Error submitting pick:",e)}}(0,n.useEffect)(()=>{(async function(){try{let e=await p.A.get("/api/currentRace?season=".concat(s));r(e.data)}catch(e){console.error("❌ Error fetching current race:",e)}})()},[s]),(0,n.useEffect)(()=>{if(!a)return;let e=new Date;if(s<2025)v(!1),i.length>0?k("Your race picks for"):k("No picks made for");else if(schedule){let s=b[a.meeting_key],t=new Date(s.picks_open),l=new Date(s.picks_close);e<l?k("Race picks open at ".concat(t.toLocaleString()," and close at ").concat(l.toLocaleString(),".")):i.length>0?k("Your race picks for"):k("No picks made for"),v(e>=t&&e<=l)}else v(!1)},[a,i]),(0,n.useEffect)(()=>{a&&e();async function e(){try{let e=await p.A.get("/api/userPicks?username=".concat(t,"&meeting_key=").concat(a.meeting_key,"&season=").concat(s));o(e.data.picks||[])}catch(e){console.error("❌ Error fetching user pick:",e)}}},[a,t]),(0,n.useEffect)(()=>{a&&e();async function e(){try{let e=await p.A.get("/api/bottomDrivers?meeting_key=".concat(a.meeting_key,"&season=").concat(s));x(e.data)}catch(e){console.error("❌ Error fetching bottom 10 drivers:",e)}}},[a]);let S="flex flex-col items-center bg-neutral-700 text-neutral-300 mb-20 pt-16 relative";return a||s!==new Date().getFullYear()?a?(0,l.jsxs)("div",{className:S,children:[a&&(0,l.jsx)("p",{className:"leading-none text-sm",children:w}),(0,l.jsx)("h2",{className:"text-xl font-display",children:a?"".concat(s," ").concat(a.meeting_name):"Season has not started yet"}),(0,l.jsx)("div",{className:"flex flex-row items-center",children:i.map((e,s)=>(0,l.jsxs)("div",{className:f("flex items-end mt-2",0===s?"flex-row-reverse":""),children:[(0,l.jsx)("img",{src:e.headshot_url,alt:e.fullName,className:"h-16"}),(0,l.jsx)("p",{className:"text-2xl font-display leading-none -mb-1",children:e.name_acronym})]},e.driverNumber))}),(0,l.jsx)("div",{className:"divider-glow-dark !w-4/5 sm:!w-1/2 mx-auto"}),(0,l.jsx)("button",{onClick:()=>j(!0),className:f("-mb-4 px-4 py-2 mt-6 rounded-lg text-neutral-100",N?"bg-cyan-800":"bg-neutral-600"),disabled:!N,children:N?i.length>0?"Update Locked":"Make Picks":"Picks Locked"}),(0,l.jsxs)(u,{isOpen:g,onClose:()=>j(!1),user:t,title:"Race Picks",children:[(0,l.jsxs)("p",{className:"font-bold leading-none",children:[s," ",a.meeting_name]}),(0,l.jsx)("h3",{className:"mb-6 text-sm text-neutral-400",children:"Select two drivers"}),(0,l.jsx)("ul",{className:"flex flex-col gap-2",children:d.sort((e,s)=>e.qualifyingPosition-s.qualifyingPosition).map(e=>(0,l.jsx)("li",{children:(0,l.jsxs)("button",{className:f("flex flex-row items-center text-xs w-full text-left rounded-lg shadow-2xl",m.includes(e.driverNumber)?"bg-neutral-600 text-neutral-200 shadow-lg":"bg-neutral-200 text-neutral-700",e.headshot_url?"pr-2":"px-1"),onClick:()=>{var s;return s=e.driverNumber,void h(e=>e.includes(s)?e.filter(e=>e!==s):e.length<2?[...e,s]:e)},children:[(0,l.jsx)("div",{className:"rounded-l-md",style:{backgroundColor:"#".concat(e.teamColour)},children:(0,l.jsx)("img",{src:e.headshot_url,alt:e.fullName,className:"h-12 -mt-4"})}),(0,l.jsxs)("div",{className:"mx-2 flex flex-row items-center",children:[(0,l.jsxs)("span",{className:f("mr-2 font-display",m.includes(e.driverNumber)?"text-neutral-300":" text-neutral-500"),children:["P",e.qualifyingPosition]}),(0,l.jsx)("span",{className:"text-[16px] font-bold",children:e.fullName})]})]})},e.driverNumber))}),(0,l.jsx)("button",{className:"px-4 py-2 mt-4 w-full bg-cyan-800 text-white rounded-lg font-bold",onClick:_,disabled:2!==m.length,children:"Confirm Picks"})]})]}):(0,l.jsx)("div",{className:S,children:(0,l.jsxs)("p",{className:"absolute left-1/2 top-3/5 -translate-x-1/2 -translate-y-1/2w -full text-center ",children:["Loading ",s," current race..."]})}):(0,l.jsx)("div",{className:S,children:(0,l.jsxs)("p",{className:"absolute left-1/2 top-3/5 -translate-x-1/2 -translate-y-1/2 w-full text-center",children:[s," Season has not started"]})})}function w(e){let{scores:s,loggedInUser:t,title:a,className:r}=e,[i,c]=(0,n.useState)(!1),o=s.slice(0,5),d=s.length>5;return(0,l.jsxs)("div",{className:f(r,"px-4 pt-6 pb-3 bg-neutral-500 rounded-2xl text-neutral-200",d?"pb-3":"pb-6"),children:[(0,l.jsx)("ul",{className:"flex flex-col gap-2",children:s.length>0?o.map((e,s)=>(0,l.jsx)("li",{children:(0,l.jsxs)("div",{className:f("w-full text-left font-bold bg-neutral-200 rounded-lg flex items-center justify-between gap-4",e.username===t?"shadow-lg text-cyan-800":"text-neutral-600",e.headshot_url?"pr-2":"py-1 px-2"),children:[e.headshot_url&&(0,l.jsx)("div",{className:"rounded-l-md",style:{backgroundColor:"#".concat(e.teamColour)},children:(0,l.jsx)("img",{src:e.headshot_url,alt:e.username,className:"h-10 -mt-4"})}),(0,l.jsx)("p",{className:f("grow leading-none"),children:e.username}),(0,l.jsx)("p",{className:"shrink-0",children:e.finalResult})]})},"".concat(e.username,"-").concat(s))):(0,l.jsx)("li",{children:"No rankings available."})}),d&&(0,l.jsx)("button",{onClick:()=>c(!0),className:"mt-2 px-4 py-2 text-white font-bold rounded-xl w-full",children:"Full Rankings"}),(0,l.jsx)(u,{title:a,isOpen:i,onClose:()=>c(!1),user:t,children:(0,l.jsx)("ul",{className:"flex flex-col gap-2",children:s.map((e,s)=>(0,l.jsx)("li",{children:(0,l.jsxs)("div",{className:f("w-full text-left font-bold bg-neutral-200 px-2 py-1 rounded-lg flex items-center justify-between gap-4",e.username===t?"shadow-lg text-cyan-800":"text-neutral-600"),children:[(0,l.jsx)("p",{className:f("grow leading-none"),children:e.username}),(0,l.jsx)("p",{className:"shrink-0",children:e.finalResult})]})},"".concat(e.username,"-").concat(s)))})})]})}function k(){return(0,l.jsxs)("div",{className:"px-6 py-10  bg-neutral-800 text-neutral-200 mt-12 sm:mt-32 max-w-screen-md rounded-2xl mx-3 md:mx-auto",children:[(0,l.jsx)("h2",{className:"text-2xl font-display mb-6",children:"Rules & Scoring"}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-neutral-400",children:"How to Play"}),(0,l.jsxs)("ul",{className:"list-disc pl-6 text-sm text-neutral-300",children:[(0,l.jsx)("li",{children:"Each race weekend, you must select 2 drivers."}),(0,l.jsx)("li",{children:"Only drivers starting 11th - 20th in qualifying are eligible."}),(0,l.jsx)("li",{children:"Points are awarded based on how much your drivers improve their finishing position."}),(0,l.jsx)("li",{children:"Picks lock at the start of the race."})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-neutral-400",children:"Scoring System"}),(0,l.jsxs)("ul",{className:"list-disc pl-6 text-sm text-neutral-300",children:[(0,l.jsx)("li",{children:"+1 point for each position gained from start to finish."}),(0,l.jsx)("li",{children:"-1 point for each position lost from start to finish."}),(0,l.jsx)("li",{children:"+3 bonus points if starting 19th or 20th and finishing 10th or higher."}),(0,l.jsx)("li",{children:"+5 bonus points if starting 19th or 20th and finishing 5th or higher."})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-neutral-400",children:"League Standings"}),(0,l.jsxs)("ul",{className:"list-disc pl-6 text-sm text-neutral-300",children:[(0,l.jsx)("li",{children:"Players are ranked by total points scored across the season."}),(0,l.jsx)("li",{children:"The leaderboard updates after each race weekend."}),(0,l.jsx)("li",{children:"Additional rankings track best single-race performances and highest average score per weekend. More to come."})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-neutral-400",children:"Extra Fun & Strategy"}),(0,l.jsxs)("ul",{className:"list-disc pl-6 text-sm text-neutral-300",children:[(0,l.jsx)("li",{children:"Tracking which drivers get picked the most"}),(0,l.jsx)("li",{children:"See which drivers gain or lose the most positions across the season"}),(0,l.jsx)("li",{children:"More insights to come."})]})]})]})]})}function y(){let[e,s]=(0,n.useState)(new Date().getFullYear()),[t,i]=(0,n.useState)(null),[c,o]=(0,n.useState)([]),[d,x]=(0,n.useState)([]),[m,u]=(0,n.useState)([]),[p,h]=(0,n.useState)([]),[g,b]=(0,n.useState)(!0);(0,n.useEffect)(()=>{let e=a.A.get("token");if(e)try{let s=(0,r.s)(e);i(s.username)}catch(e){console.error("Error decoding token:",e)}},[]),(0,n.useEffect)(()=>{(async function(){let s="stats-".concat(e),t=sessionStorage.getItem(s);if(b(!0),t){let e=JSON.parse(t);o(e.topSingleRaceScores||[]),x(e.averagePointsPerUser||[]),h(e.driverSelectionPercent||[]),u(e.topScoringDrivers||[]),b(!1);return}try{let[t,l]=await Promise.all([fetch("/api/top-race-scores?season=".concat(e)),fetch("/api/driver-selection-stats?season=".concat(e))]),n=await t.json(),a=await l.json();o(n.topSingleRaceScores||[]),x(n.averagePointsPerUser||[]),u(n.topScoringDrivers||[]),h(a.driverSelectionPercent||[]),sessionStorage.setItem(s,JSON.stringify({...n,driverSelectionPercent:a.driverSelectionPercent||[]}))}catch(e){console.error("❌ Error fetching race stats:",e)}finally{b(!1)}})()},[e]);let y=g?(0,l.jsx)("p",{children:"Loading..."}):(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 w-full sm:ml-3",children:[(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("h2",{className:"font-bold px-2 leading-none mb-1",children:"Single Race Scores"}),(0,l.jsx)(w,{scores:c,loggedInUser:t,title:"Single Race Scores"})]}),(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("h2",{className:"font-bold px-2 leading-none mb-1",children:"Average Scores"}),(0,l.jsx)(w,{scores:d,loggedInUser:t,title:"Average Scores"})]})]});return(0,l.jsxs)("div",{className:"mb-32",children:[(0,l.jsx)(j,{}),(0,l.jsxs)("div",{className:"flex flex-col justify-center items-center pt-10",children:[(0,l.jsx)("h1",{className:"text-xl font-display leading-none",children:"Best of the Rest"}),(0,l.jsx)("label",{className:"text-sm leading-none",children:"Redemption starts at the back"}),(0,l.jsx)("select",{value:e,onChange:e=>s(parseInt(e.target.value)),className:f("p-2 border-4 border-neutral-700 rounded-lg -mb-6 bg-neutral-100 z-10",t?"-mb-6 mt-10":"mb-16 mt-2"),children:[...Array(new Date().getFullYear()-2022)].map((e,s)=>{let t=2023+s;return(0,l.jsx)("option",{value:t,children:t},t)})})]}),(0,l.jsxs)("section",{children:[t&&(0,l.jsx)(v,{season:e,username:t}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row mx-auto relative gap-4",children:[(0,l.jsxs)("div",{className:"responsive-contianer relative sm:absolute sm:w-full sm:mt-10 max-sm:mb-4",children:[(0,l.jsx)("div",{className:"responsive-line"}),(0,l.jsxs)("div",{className:"flex flex-col items-end w-1/2 sm:px-8",children:[(0,l.jsx)("div",{className:"responsive-xl",children:"League"}),(0,l.jsx)("div",{className:"responsive-lg text-neutral-500 z-[1]",children:"Stats"})]})]}),(0,l.jsx)("div",{className:"max-sm:hidden w-1/2 flex items-start mt-[20%]",children:y}),(0,l.jsxs)("div",{className:"sm:w-1/2 sm:mr-3 max-sm:mx-3 z-10",children:[(0,l.jsx)("h2",{className:"font-display text-2xl px-4 -mb-2.5",children:"Leaderboard"}),(0,l.jsx)(N,{season:e,loggedInUser:t})]})]})]}),(0,l.jsx)("section",{children:(0,l.jsx)("div",{className:"mt-8 px-3 sm:mt-32",children:(0,l.jsx)("div",{className:"sm:hidden",children:y})})}),(0,l.jsxs)("div",{className:"responsive-contianer flex justify-end relative w-full my-12 max-sm:mb-4",children:[(0,l.jsx)("div",{className:"responsive-line"}),(0,l.jsxs)("div",{className:"flex flex-col items-end w-1/2 sm:px-8 px-3",children:[(0,l.jsx)("div",{className:"responsive-xl",children:"Driver"}),(0,l.jsx)("div",{className:"responsive-lg text-neutral-500 z-[1]",children:"Stats"})]})]}),(0,l.jsxs)("section",{className:"flex flex-col sm:flex-row gap-4 items-center max-w-2xl mx-auto mt-10 sm:mt-24 px-3",children:[(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("h2",{className:"font-bold px-2 leading-none mb-1",children:"Most Picked Drivers"}),g?(0,l.jsx)("p",{children:"Loading..."}):(0,l.jsx)(w,{scores:p,title:"Most Picked Drivers"})]}),(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("h2",{className:"font-bold px-2 leading-none mb-1",children:"Top Scoring Drivers"}),g?(0,l.jsx)("p",{children:"Loading..."}):(0,l.jsx)(w,{scores:m,title:"Top Scoring Drivers"})]})]}),(0,l.jsxs)("div",{className:"responsive-contianer flex justify-start relative w-full my-12 sm:my-32 max-sm:mb-4",children:[(0,l.jsx)("div",{className:"responsive-line"}),(0,l.jsxs)("div",{className:"flex flex-col items-start w-1/2 sm:px-8 px-3",children:[(0,l.jsx)("div",{className:"responsive-xl",children:"Rules"}),(0,l.jsx)("div",{className:"responsive-lg text-neutral-500 z-[1]",children:"Scoring"})]})]}),(0,l.jsx)(k,{})]})}},2936:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(784)}])}},e=>{var s=s=>e(e.s=s);e.O(0,[54,636,593,792],()=>s(2936)),_N_E=e.O()}]);